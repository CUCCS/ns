## 编辑指定短信内容发送到指定号码（验证身份） ##
短信验证码的实现方式共有两种，一种是网站通过用户在网页上预留的电话号码，向用户发送验证码，以验证用户的身份，另一种就是我们接下来要实验的这种，用户按照网页上的要求，用自己的手机编辑指定内容的短信发送给指定号码来向网站证实自己的身份。  

这种验证身份的方式的原理很明显：当一个用户在网页上输入了自己的电话号码之后，网站会给该号码产生一个随机的唯一的标识字符串，然后用户通过在自己的手机上编辑该标识字符串发送到网页所预留的指定号码，服务器收到该短信之后，会将发送短信的号码与之前得到的号码进行匹配验证，如果号码是相同的，再验证短信的内容是否与之前的产生的唯一标识符号串一致，若都是一致的，则认为该用户的身份是合理的，允许注册或进行别的操作。  

这种验证方式共有三个阶段：  
> 第一阶段：用户在网页上填写信息，其中包含自己将要绑定的电话号码，然后进行提交接着进入第二阶段；  
> 第二阶段：用户按照网站的下一步操作提示，使用自己的手机编辑指定内容的短信发送到指定的号码；显然第二阶段是此次身份验证的核心阶段，也是攻击者最关注的阶段。  
> 第三阶段：网站收到用户手机号发来的短信，进行验证，如果内容和号码都与服务器端的匹配，则验证成功。  

现在我们主要分析一下第二阶段可能出现的安全问题：
> **首先，用户所进行验证的网站是否真的为自己所期望的网站，也就是说，用户很可能被劫持；这种劫持的也分两种情况，第一种是从用户开始填写个人资料开始就访问的不是真正的网站，然后将自己的信息提交给该不被信任的网站；第二种情况是在用户进行身份验证的时候，攻击者先劫持该真实网站给用户的反馈，然后诱导用户将验证信息发送给错误的号码，这样用户进行了身份验证却没办法进行下一步操作，待用户放弃后，攻击者可以伪装成用户的号码进行身份验证，最后获得该用户的身份；**  

>**其次，用户的手机并不是绝对安全的，尤其是智能手机，有可能会有短信木马，将用户发送的短信进行拦截并且发送给攻击者，和之前的情况相似，如果用户因为多次验证无果而放弃，攻击者有所作为或者无作为，都已经至少实现了拒绝服务攻击；进一步攻击的话，有可能获得用户的身份，去做一些别的事情，比如欺骗用户说，“因为您多次验证失败，为保证您的信息安全，您需要发送……”，在这种情况下，一般用户本身就在因为不能验证身份而胡思乱想，这样一诱导，攻击者就有可能获得更多用户的私密信息；**  

>**再次，假设用户的手机丢失了，更甚是被有预谋的偷窃，那样与该用户手机号码绑定的所有网络服务都是很危险的，因为通过发送短信验证码可以进行改密等一系列的操作，如果丢失手机的用户没有第一时间补卡并且手机锁屏很简单，那么最后的损失可能会非常大；所以说，身份验证依赖短信验证码的这个机制，本身就存在安全问题。**

并且，对于短信验证码来说，接收短信再在网页上填写短信和发送短信给网站这两种方式进行验证的安全性是差不多的，过程也比较类似，都有三方面参与了整个通讯过程：客户端、服务端、通讯服务端，整个验证过程的安全性取决于三次数据传输时的安全性，客户端与服务端、客户端与通讯服务端、服务端与通讯服务端。
