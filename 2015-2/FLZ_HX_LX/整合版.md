#开放网络服务信息收集实验
◦alexa全球排名top 10000的站点选择其一  
◦禁止使用任何方式直接扫描目标站点  
◦禁止对目标站点进行任何形式的渗透测试或攻击行为  
◦信息收集手段包括但不限于：搜索引擎搜索、whois查询、域名枚举、使用合法客户端连接目标端口等  
◦信息收集内容包括但不限于：子域名及其对应服务说明、IP地址段、电子邮件、组织结构信息、联系方式信息、公开的漏洞信息等  

# 所选网站：京东  

# SE0综合查询：
**收集手段：**whois    
**网站地址：**  [http://seo.chinaz.com/](http://seo.chinaz.com/)  
**收集内容：**  
1.网站基本信息  
![](http://i.imgur.com/CfsHHh2.png)

2.百度相关  
![](http://i.imgur.com/R5a1hKm.png)  

3.各浏览器收录信息  
![](http://i.imgur.com/UHQnRIY.png)  

4.相关关键词在各浏览器上的排名  
![](http://i.imgur.com/95jqo5F.png)    

5.服务器信息
![](http://i.imgur.com/3TtF0rt.png)  
**反馈信息：**  
有以上关于京东的基本信息可以得出，京东在世界网站中排名都是十分靠前的，并且在百度首页中处于第一的位置，百度流量将近100万，说明京东使用人数庞大，每天的点击量也是不断增长。通过在百度、谷歌、360、搜狗几个浏览器的对比，我们可以看出，京东在百度中的收录数量是最多的，远远多于其他浏览器。另外，相关关键词在各浏览器中的排名也明显的突出了京东的特点，京东的主要商品是数码电子产品，手机，电脑和笔记本在搜索量上远远超过其他产品。

# 官方备案信息 
**收集手段：**京东主页面给出的官方备案信息  
**收集内容：**  
![](http://i.imgur.com/NCNI1OL.png)  

# 端口分析：  
**收集手段：**  whois查询  
**收集内容：**  
![](http://i.imgur.com/2vN13lc.png)  
    	开放端口有80和443  
		HTTP服务器默认的端口号为80  
		HTTPS服务器默认端口443  

**风险分析：**     
端口扫描所需信息：  
1、开放端口  
2、目标计算机ip  
3、已知漏洞信息  
4、目标主机系统及服务程序类型和版本   

端口扫描步骤：         
1.扫描目标主机识别工作状态（开/关机）  
2.识别目标主机端口状态（监听/关闭）  
3.识别目标主机系统及服务程序的类型和版本  
4.根据已知漏洞信息，分析系统脆弱点  
5.生成扫描报告         

利用端口扫描收集内部信息：    
如果攻击者知道网站的某些开放端口，那么攻击者可以利用某些端口扫描的技术或者扫描软件针对目标计算机的通信进行抓包，根据我们得到的ip地址段以及服务器ip地址的信息，只要攻击者知道了任意主机的ip，对该网站的主机或网络设备进行探测。比如开放扫描，会产生大量审计数据，容易被对方发现，但其可靠性高。 隐蔽扫描：能有效避免对方侵检测系统和防火强墙的检测，但这种扫描使用的数据包在通过网络时容易被丢弃，从而产生错误的探测信息。
  
利用端口扫描得到的信息进行攻击：    
另外，如果攻击者知道了站点的开放端口以及他想要攻击的目标主机的ip地址，可以通过一些特殊的Ping命令对目标主机产生大量的数据包从而使目标主机反应不过来，达到了使网站暂时拒绝服务的目的。例如京东开放的80端口，可以通过一条ping -t hostname连续不断的发送命令，或者利用其他命令发送大量数据包，yahoo就是被黑客用这种方式搞瘫痪的.
   
利用存在的漏洞结合端口扫描的攻击：  
针对80端口常用的利用方式：lls溢出/SQL注入/旁注/跨站。攻击者可利用一些扫描工具，根据他已经收集到的信息，选择端口，扫描内容等进行扫描，根据以上收集到的信息，攻击者要获得站点的漏洞信息和域名信息并不难，另外攻击者可以通过端口扫描得到网站目前存在的最新的漏洞信息，然后根据他得到的相关漏洞信息进行相应攻击。得到了漏洞信息可以通过分析漏洞原理然后站点进行攻击，例如京东2015年9月份就发生了一起某活动页面被sql注入攻击的事件，目前是否解决无从得知，端口扫描的方式可以让攻击者得到最新的甚至官方都不知道的漏洞信息。443是能够提供加密以及通过安全端口传输的http，京东是一个交易型网站，所以很有必要开启443端口保证网页安全性。但是如果黑客利用SSL漏洞进行攻击的话可以盗取用户的信用卡账号登陆账号等。在我们得到的漏洞信息中可知，京东存在ssl漏洞，SSL的主要组成，从来都无法保护服务器，它们仅仅可以保护该服务器所收发的数据。而且安全漏洞扫描软件并不会审查受到SSL 保护的网页服务器。     
   
**后果：**设备信息泄露，发现网站漏洞，用户账号泄露，网站拒绝服务。  
**可能性：** 2（低）   
 理由：京东的服务器比较强大，大概需要几百台电脑同时攻击才能成功，所以如果不是死对头且实力雄厚一般人不会这样做（个人看法）。    
**影响程度：** 4（高）    
**风险级别：**  中等风险（8）      
**措施：**关闭闲置端口，安装可靠的防火墙。        

# 子域名及其对应服务说明 #
**收集手段：**whois  
**网站地址：**  
[http://alexa.chinaz.com/?domain=jd.com&qq-pf-to=pcqq.c2c](http://alexa.chinaz.com/?domain=jd.com&qq-pf-to=pcqq.c2c)  
**收集内容：**共65个子站点，源域名：360buy.com ，2013年3月启用新域名：jd.com。  
**京东会员登陆：**  
home.jd.com    
t.jd.com  
joycenter.jd.com  
plus.jd.com  
imzone.jd.com  
Dou.jd.com          
pop.jd.com        
Authpay.jd.com  
**跳到主站点：**  
Bolt.jd.com   
Marathon.jd.com  
item.jd.com   
jd.com  
shop.jd.com  
shop.jd.com  
mall.jd.com  
myjd.jd.com  
channel.jd.com  
**金融相关：**   
trade.jd.com京东金融  
jr.jd.com京东金融  
baitiao.jd.com白条页，京东金融  
z.jd.com京东众筹，京东金融    
**其他功能：**  
Jzt.jd.com       京东旗下营销推广平台    
Chongzhi.jd.com  用于充值各类账号，游戏，话费等    
Yushou.jd.com    预售  
Huishou.jd.com   以旧换新  
Bk.jd.com        与理财，办卡相关  
wqs.jd.com       京东商场，但功能不如主站点  
search.jd.com 搜索页  
sale.jd.com 打折商品主页  
list.jd.com 购物清单页  
cart.jd.com 购物车页  
order.jd.com 订单页  
re.jd.com 热卖商品主页 
club.jd.com京东论坛  
m.jd.com移动端页面  
quan.jd.com用户个人中心  
vip.jd.com会员服务主页  
paimai.jd.com京东拍卖页面  
auction.jd.com京东夺宝岛  
help.jd.com京东帮助页面（客户服务，快递查询，售后服务等）  
en.jd.com京东全球购物网站（针对国外，全英文）  
tuan.jd.com京东团购页面（电影团购、旅游团购、服装团购等）  
chat5.jd.com京东在线客服（用户入口+商家入口）  
book.jd.com图书售卖页面  
xuan.jd.com天天低价（京东促销大全）  
mobile.jd.com京东通信网上营业厅  
red.jd.com京东闪购（品牌活动）  
pinpaijie.jd.com品牌特卖  
coudan.jd.com一个开发过程中使用的购物车测试页面  
Shouji.jd.com    只推手机  
Xinpin.jd.com    新品推送  
Signin.jd.com    登陆，注册（英文页面）  
**废弃站点：**  
Usergrade.jd.com 停用  
i.jd.com         停用  
coupon.jd.com停用  
passport.jd.com停用  
cashier.jd.com停用  
coll.jd.com无法打开   
safe.jd.com无法打开  
union.jd.com 无法打开  
giftcard.jd.com无法打开  
jrcashier.jd.com无法打开  
**收集目的：**  
1.IP地址与域名之间存在多对多的关系。  
2.基于1.通过收集到的子域名可以获取更全面的IP地址，用得到的IP地址进行进一步所需操作。  

# IP地址段
**收集手段：**threatcrowd，ping，猜和尝试   
**收集内容：**  
111.206.227.118-236     
111.206.227.250    
111.206.231.1  
211.151.106.27  
211.152.121.26  
211.152.122.84  
211.152.122.102  
211.152.123.224  
**收集手段：**nslookup   
**收集内容：**  
![](http://i.imgur.com/5Q0PD98.png)  
**收集手段：** [http://www.pagesinventory.com/search/?s=jd.com](http://www.pagesinventory.com/search/?s=jd.com)  
**收集内容：**  
![](http://i.imgur.com/GrmOlbN.png)
 **收集目的：**  
1.IP地址是网络中真正进行通信的地址。针对于IP地址本身可以进行攻击，如将其IP地址放入IP数据包中的目的地址字段，向服务端发送大量数据报，造成拒绝服务攻击。  
2.通过IP地址获取旁站，从而进一步收集关于系统，网络配置等的详细信息。  

# DNS服务器   

		4个DNS服务器：
		NS1.JDCACHE.COM
		ip地址：111.13.28.10

		NS2.JDCACHE.COM
		ip地址：111.206.226.10

		NS3.JDCACHE.COM
		ip地址：120.52.149.254

		NS4.JDCACHE.COM
		ip地址：106.39.177.32
**风险分析：**  
1.中间人攻击：每一个服务器都有许多个ip地址，dns服务器的主数据库中存储着很多域名以及ip地址，我们要得到服务器的ip地址很容易。dns服务器存在的客户端首先以特定的标识向DNS服务器发送域名查询数据报，在DNS服务器查询之后以相同的ID号给客户端发送域名响应数据报。这时客户端会将收到的DNS响应数据报的ID和自己发送的查询数据报ID相比较，如果匹配则表明接收到的正是自己等待的数据报，如果不匹配则丢弃之。假如攻击者能够伪装DNS服务器提前向客户端发送响应数据报，那么客户端的DNS缓存里域名所对应的IP就是攻击者自定义的IP了，当一台主机访问京东的服务器时，攻击者利用一些工具，例如ettercap，将目标主机所发送的数据包转移到攻击者的主机，并且攻击者任意修改后再发送给服务器，这样，攻击者就会获取到用户的机密信息，攻击者假冒服务器端后也可以发送攻击者想要目标主机访问的任何内容，比如一些不安全网站。  
2.拒绝服务攻击：攻击者可以向服务器端发送大量的数据包，导致域名无法解析。  
3.域名劫持：DNS服务器中，储存着域名与IP地址的映射表。当获得DNS服务器的IP地址，通过一定手段攻击DNS服务器，修改映射表，可以实现域名劫持。  
**风险等级：**高。    
**后果：**用户信息泄露，网站无法访问，跳转到攻击者设定的网站。  
**措施：**服务器端使用SSH加密协议，对数据流加密。进行ip和MAC地址的绑定，预防arp欺骗攻击，因为arp欺骗是dns欺骗的开端。
# 公开漏洞信息 #
**收集手段：**搜索引擎  
**网站地址：**  
[http://www.wooyun.org/corps/%E4%BA%AC%E4%B8%9C%E5%95%86%E5%9F%8E](http://www.wooyun.org/corps/%E4%BA%AC%E4%B8%9C%E5%95%86%E5%9F%8E)  
**收集内容：**  
1.2015年漏洞数量统计：    
![](http://i.imgur.com/RAlrA9c.png)  
2.2015年漏洞类型统计：  
![](http://i.imgur.com/V7tY2I9.png)  
3.2015年具体漏洞：  
**由2.中饼状图，XSS类型漏洞数量最大，约占整体1/3。**  
**wooyun上2015年所发现的XSS类漏洞如下：**   
- 京东手机APP某处过滤不严导致XSS盲打以打到后台Cookie  	
- 京东金融存在xss  	
- 京东某处图片上传过滤不严导致XSS跨站   	  	
- 京东金融某处存储型XSS跨站  
- 京东官网某处XSS已返回Cookie数  	
- 京东某站由HTTP parameter pollution导致的XSS跨站(绕过chrome 的filter)  	
- 京东某站功能存在储存型XSS漏洞可截获用户cookie  	
- 京东商城某子站XSS跨站漏洞  	     	
- 京东旗下某站信息泄露可能导致可进入内网  	
- 京东某分站XSS漏洞修复不当仍然可以执行代码截获cookie  
- 京东商城手机版某处xss  	

**风险分析：**xss漏洞可分为两种，存储型和触发型，根据我们的漏洞信息收集可以得出一个结论，京东两种都占全了，而且形式多种多样。触发型的有，允许任意文件上传，图片上传，图片过滤不严，这些都给攻击者营造了破坏网站和窃取信息的环境，攻击者可通过在文件或者图片中隐藏恶意代码，当用户点击或查看时触发攻击，使其跳转至恶意网站或者跳出一个登陆页面以获取用户信息，只要会写js代码，那么xss可以用在任何网站任何地方。存储型xss攻击会把攻击者的数据存储在服务器端，攻击行为将伴随着攻击数据一直存在，当用户首次登入网站时，服务器为该用户创建一个 session ID，同时向浏览器传送一个 cookie，cookie保存会话连接中用到的数据，session ID作为会话标识，浏览器后续的请求均基于该session ID。攻击者先以普通用户的身份登陆，然后向服务器发送一条带有特殊js代码的消息，这条特殊代码将存储在服务器的数据库中，一旦管理员登陆，攻击者就可以获得管理员的 session ID,有了这个攻击者就可以在数据库中为所欲为。因为攻击者写的代码一直都存在于数据库中，如果程序员没有发现，那么将一直成为威胁。   
**可能性：** 高（4）  
理由：大部分网站都存在XSS漏洞，几乎不可避免。利用XSS漏洞攻击无需成本，且形式多样效果显著。    
**影响程度：** 极高（5）  
**风险级别：**  极高风险（20）   
**后果：**获取用户信息，链接恶意网站，破坏网站，攻击者进入数据库。    
**措施：**通过定义白名单的形式，例如只允许href class style属性。然后对每一个可能造成XSS的属性进行特定的过滤。   

**权限绕过：**  
- 京东某站可以越权删除用户数据  
- 京东某业务越权漏洞涉及资金  

**风险：**通过burpsuite，将用户2的id改为之前抓包得到的用户1的id，对用户1进行平行越权。  
**风险评级：**中  
**后果：**损害用户利益，造成财产的损失。  
**措施：**加强对用户控制权限的控制，严格授权。

**SQL注入攻击：**    
Sql注入式攻击是指利用设计上的漏洞，在目标服务器上运行Sql 命令以及进行其他方式的攻击，动态生成Sql命令时没有对用户输入的数据进行验证是网站系统被Sql注入攻击主要原因。  
**SQL注入的一般步骤：**  
1. 判断环境，寻找注入点，判断数据库类型  
2. 根据注入参数类型，在脑海中重构SQL语句的原貌，按参数类型主要分为下面三种：  
- 注入的参数是数字型  
- 注入的参数是字符型  
- 搜索时没过滤参数，使用关键字的  
3. 接着，将查询条件替换成SQL语句，根据返回内容猜解表名  
4. 在表名和列名猜解成功后，再使用SQL语句，得出字段的值；猜不到表名得不到字段值的时候，已知京东是用的SQL server数据库，可以利用系统表注入SQLServer数据库。  
**防范措施：**  
服务器管理员：SQL注入入侵是根据IIS给出的ASP错误提示信息来入侵的，把IIS设置成无论出什么样的ASP错误，只给出一种错误提示信息，即http 500错误，拒绝入侵  
程序员：最小权限原则，为不同的类型的动作或者组建使用不同的账户，最小权限原则适用于所有与安全有关的场合；对用户输入进行检查，如对一些特殊字符，比如单引号，双引号，分号，逗号，冒号，连接号等进行转换或者过滤，对 exec、insert、select、delete、from、update、count、user、xp_cmdshell、add、net、Asc等关键字过滤；使用强数据类型；限制用户输入的长度等等。  

# 联系方式信息收集 #
**收集手段：**whois、京东官方网站    
**收集内容：**  
注册电话/管理电话/技术电话 +86.01050958005  
注册传/管理传/技术传真+86.01050957958  
注册邮箱jdym@jd.com  
媒体合作邮箱media-contact@jd.com  
服务留言邮箱service@jd.com  
京东云合作邮箱jcloud@jd.com  
京东广告合作邮箱ad@jd.com  
京东集团战略合作	JDGroup_bd@jd.com  
京东商城战略合作	JD_bd@jd.com  
京东金融战略合作	JDFinance_bd@jd.com  
拍拍网战略合作paipai_bd@jd.com  
京东海外业务战略合作：JDOverseas_bd@jd.com  
京东智能硬件战略合作	JDSMART_bd@jd.com  
  
采销联系：  
通讯品类 郭小姐	tongxun@jd.com  
家电品类	薛先生	xuewenxing@jd.com  
汽车用品	李先生	bjliwei@jd.com  
IT、数码品类	 王先生	itcx@jd.com  
日用百货品类	刘小姐	rbcx@jd.com  
图书品类	郝小姐	haosiyuan@jd.com  
    
物流招标联系方式：   
华北区	贺丽萍	bfheliping@jd.com  
华东区	陶俊豪	shtaojunhao@jd.com  
华南区	刘海权	gzliuhaiquan@jd.com  
西南区	吴玮琦	wuweiqi@jd.com  
华中区	焦扬	whjiaoyang@jd.com  
东北区	罗浩	syluohao@jd.com  
西北区	龙哲	xblongzhe@jd.com  
集团	张运柱	zhangyunzhu@jd.com  
招商联系：
[http://http://sale.jd.com/act/hLF8eujCXw6ckmY.html](http://http://sale.jd.com/act/hLF8eujCXw6ckmY.html)  
  
# 部分员工信息收集 #

**收集手段：**搜索引擎  
京东官方网站[http://sale.jd.com/act/AQNC54rGc03wB.html](http://sale.jd.com/act/AQNC54rGc03wB.html)  
中国物流招标网  [http://www.clb.org.cn/%28X%281%29S%28px4hovao4iscafua1lhdortq%29%29/ZhaoBiaoGongGao/32604.aspx?AspxAutoDetectCookieSupport=1](http://www.clb.org.cn/%28X%281%29S%28px4hovao4iscafua1lhdortq%29%29/ZhaoBiaoGongGao/32604.aspx?AspxAutoDetectCookieSupport=1)  
reg007:[http://www.reg.007](http://www.reg.007)  
**收集内容：**  
贺丽萍  
京东2015年华北区北京整车运输承运商招标负责人  
邮箱：bfheliping@jd.com  
手机：13521163152   
注册过的网站：搜房网、中华英才网、小米官网、沪江网、学信网、布丁酒店、淘美居购物网

武弦   
京东2015年华北区北京整车运输承运商招标负责人   
邮箱：bfwuxian@jd.com  
手机：18210225661  
注册过的网站：人人网、优酷、土豆、苏宁易购  
用此方式，可以搜索到京东所有分公司的物流招标负责人的联系方式  


**风险：**官方网站公开业务联系人的姓名、邮箱、职位等信息，利用姓名、邮箱可以在搜索引擎搜索到目标人的手机号码，利用邮箱和手机号码可以通过公开的信息追踪工具、google hacking、社工库得到目标人的社交网络应用信息、账户的口令、常用IP。黑客获取到这些信息后，可能会通过电子邮件、即时通信、社交软件进行钓鱼攻击；黑客通过发送邮件发送木马程序，目标人主机被感染，账号密码被窃；直接登录目标人的账号，获取其中的私密信息。  
**风险等级：**中  
**后果：**  
1. 员工的密码、身份证号、信用卡号等信息被盗，进而资金可能失窃；  
2. 员工之间的通信内容（可能包括一些商业机密信息）被窃；  
3. 员工使用的主机被感染；员工主机所在网络被攻击，导致整个内部系统瘫痪。   
**措施：**   
1. 员工在业务联系时不得不公开邮箱、手机号时，不在使用公开的邮箱、手机号进行私人事务往来或者使用临时邮箱地址代替真实地址；  
2. 不使用弱密钥，经常更换秘钥；  
3. 不在即时通讯工具或者邮件中传输敏感、机密信息。  





# 组织结构信息 #
**收集手段：**搜索引擎  
**收集内容：**  
**IT部门架构：**  
![](http://i.imgur.com/3d6YBp1.jpg)  
**大数据部副总经理：邢志峰**    
邮箱：xingzhifeng@jd.com  
微信：xingzf03  
![](http://i.imgur.com/DHCcCub.jpg)  
**风险：**  
攻击者可以通过社会工程学，Google hacking对他进行攻击。通过他（或以他的身份）侵入京东的IT部门内部网络，得到对大量机密数据的存取控制权限。  
**风险等级：**高  
**后果：**用户数据泄露，数据库破坏，京东网站无法正常运行。  
**措施：**京东内部工作人员对数据库等重要、机密数据的操纵，可以使用多人认证机制。即当重要职位、高权限的人员，在进行对数据库操作时，应有同等权限的人员进行共同认证。  

# 银行账户信息收集  
**收集手段：**搜索引擎   
**收集内容：**   
线下公司汇款  
户名：江苏省京东信息技术有限公司  
账户：110907100910708  
开户行：招商银行股份有限公司北京青年路支行  

邮局汇款  
收款人姓名：京东  
商户客户号：310423054    
**风险：**为了客户汇款方便，公开企业银行账户一般不会有风险，但是当企业有经济纠纷的时候，和本公司有纠纷的企业在向法院起诉的时候，就可以申请财产保全，要求冻结企业的银行帐号。  
**风险等级:**低  
**后果：**有纠纷时，其他企业向法院提出起诉申请财产保全时，银行账号可能会被冻结。   
**措施：**很多公司为了自助转汇款方便都是将银行账户公开，账户的安全这依赖于银行信息系统的安保系统和法律的制约。
