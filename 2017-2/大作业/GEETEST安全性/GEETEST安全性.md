# GEETEST安全性及破解 #

- GEETEST是一种滑动验证码。用户通过拖动滑块至图片空缺位置即可通过验证。

![Alt text](/example.png)

## 优势 ##

- 采用**行为式验证**，除了依靠滑块的正确匹配，还考虑拖动过程的行为轨迹是否符合真人动作
- 用户体验好，验证过程简单快捷

## 劣势 ##

- 前端信息采集加密对抗较弱
- 缺乏二次验证机制
- 更方便机器模拟验证过程进行破解


## 破解过程 ##

- 模拟点击动作，触发滑动验证码图片出现。保存，名为fullbg
    - 下载的图片并不是原图，而是由多个切分后的图片拼接而成。在网页上显示时是通过css的background-position属性对图片进行还原。但每次图片打乱的规律相同，通过简单的固定的图片裁剪拼接即可还原
- 模拟稍微移动滑动按钮，触发滑块出现。此时的图片存在滑块阴影空缺。保存，名为bg
- 比较两图片的像素差异即可得到最终滑块最终停止位置
- 如果没有fullbg，只需多次比较不同的bg，通过求交集亦可以获得最终滑块停止位置
- 模拟水平偏移过程
    - 移动不能太快，也不能完全匀速，需要与真实用户的行为相近
    - 可以采集真实的鼠标移动数据进行模拟
    - 可以利用selenium进行模拟，具体参考[https://github.com/darbra/geetest](https://github.com/darbra/geetest)
    - 可以通过长周期小振幅的正弦函数模拟移动轨迹的y值，x值利用滑块最终停止位置确定生成的帧数不均匀增加。t随时间产生不均匀增加，并加入跳变。以此生成移动轨迹



## 参考 ##

- [http://https://www.zhihu.com/question/28833985](http://https://www.zhihu.com/question/28833985)
- [https://www.v2ex.com/t/138479](https://www.v2ex.com/t/138479)