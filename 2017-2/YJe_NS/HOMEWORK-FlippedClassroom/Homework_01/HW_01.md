# 实验一实验报告

## 实验要求
* 基于VirtualBox的网络攻防基础环境搭建实例讲解
    * 节点：靶机、网关、攻击者主机
    * 连通性
        * 靶机可以直接访问攻击者主机   （实现）
        * 攻击者主机无法直接访问靶机   （不算真正实现）
        * 网关可以直接访问攻击者主机和靶机   （实现）
        * 靶机的所有对外上下行流量必须经过网关 （未实现）
        * 所有节点均可以访问互联网 （靶机未实现上网，其余可以）
    * 其他要求
        * 所有节点制作成基础镜像（多重加载的虚拟硬盘） （实现）


## 实验拓扑

![](https://github.com/Anna-YJ/ns/blob/master/2017-2/YJe_NS/Picture/Flipped/hw1.pic01.png?raw=true)  

## 实验部分结果
* 靶机（KaliVictim)，网关（KaliGateway），攻击机（KaliAttack）设置如下     
![](https://github.com/Anna-YJ/ns/blob/master/2017-2/YJe_NS/Picture/Flipped/hw1.pic09.png?raw=true) 
![](https://github.com/Anna-YJ/ns/blob/master/2017-2/YJe_NS/Picture/Flipped/hw1.pic11.png?raw=true) 
![](https://github.com/Anna-YJ/ns/blob/master/2017-2/YJe_NS/Picture/Flipped/hw1.pic12.png?raw=true) 
![](https://github.com/Anna-YJ/ns/blob/master/2017-2/YJe_NS/Picture/Flipped/hw1.pic10.png?raw=true) 


* 攻击者主机无法直接访问靶机 （不算真正实现，是因为按照配置后，三机应该要能Ping通，需要一定限制才能使攻击机不能直接访问靶机，而现在是因为它和靶机本身不通的缘故） 
![](https://github.com/Anna-YJ/ns/blob/master/2017-2/YJe_NS/Picture/Flipped/hw1.pic03.png?raw=true)

* 网关可以直接访问攻击者主机和靶机  
![](https://github.com/Anna-YJ/ns/blob/master/2017-2/YJe_NS/Picture/Flipped/hw1.pic04.png?raw=true)

* 网关和攻击机可以访问互联网  （都为NAT网络，可以直接上网）
![](https://github.com/Anna-YJ/ns/blob/master/2017-2/YJe_NS/Picture/Flipped/hw1.pic02.png?raw=true)
![](https://github.com/Anna-YJ/ns/blob/master/2017-2/YJe_NS/Picture/Flipped/hw1.pic08.png?raw=true)

* 所有节点制作成基础镜像（多重加载的虚拟硬盘）  
![](https://github.com/Anna-YJ/ns/blob/master/2017-2/YJe_NS/Picture/Flipped/hw1.pic05.png?raw=true)  
![](https://github.com/Anna-YJ/ns/blob/master/2017-2/YJe_NS/Picture/Flipped/hw1.pic06.png?raw=true)  
![](https://github.com/Anna-YJ/ns/blob/master/2017-2/YJe_NS/Picture/Flipped/hw1.pic07.png?raw=true)



## 实验问题
本次实验听取了老师和同学的讲解，思路如上拓扑图，在处理网关两块网卡不能上网时，参考了此链接：https://linux.cn/article-5595-1.html，设置用IP转发使内部网络（internal）连接到互联网，将内部网络的包转发到NAT的那个网络，此时两张网卡同时打开也能上网。按照这条路，靶机应当能上网，且能访问攻击机，但此时却不行。（查看路由，默认路由设置没问题），tcpdump了一下eth0上的包，实际上是能看到有攻击机和靶机上的包，但是还是没能达到设置，使靶机上网和与攻击机的连通性。我与同学讨论，发现相同思路，类似做法，她的是能够实现所有实验要求，可见这个方法应当是可行，我可能查错还有遗漏？ 最后还是决定交上实验报告（尽管确实交得太迟，真的很不负责了），一直执拗完全实现再交报告（虽然老师说不管做没做出来及时交会好），以后不会再出现这种情况了。