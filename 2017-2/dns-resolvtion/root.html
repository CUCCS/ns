<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>amMap example</title>

        <link rel="stylesheet" href="../ammap/ammap.css" type="text/css">
        <script src="./ammap/ammap.js" type="text/javascript"></script>
        <!-- map file should be included after ammap.js -->
		<script src="./ammap/maps/js/worldLow.js" type="text/javascript"></script>
		<script src="./ammap/themes/black.js" type="text/javascript"></script>
        <script>
			/*
			        		although ammap has methos like getAreaCenterLatitude and getAreaCenterLongitude,
			        		they are not suitable in quite a lot of cases as the center of some countries
			        		is even outside the country itself (like US, because of Alaska and Hawaii)
			        		That's why wehave the coordinates stored here
			        	*/

			var latlong = {};
			latlong["roota"] = {
				"latitude": 38.9599,
				"longitude": -77.3428
			};
			latlong["rootb"] = {
				"latitude": 33.9803,
				"longitude": -118.44
			};
			latlong["rootc"] = {
				"latitude": 38.907,
				"longitude": -77.0526
			};
			latlong["rootd"] = {
				"latitude": 38.9807,
				"longitude": -76.9369
			};
			latlong["roote"] = {
				"latitude": 28.1424,
				"longitude": -80.7108
			};
			latlong["rootf"] = {
				"latitude": 37.4857,
				"longitude": -122.211
			};
			latlong["rootg"] = {
				"latitude": 39.9829,
				"longitude": -82.9105
			};
			latlong["rooth"] = {
				"latitude": 39.5359,
				"longitude": -76.3483
			};
			latlong["rooti"] = {
				"latitude": 57.9314,
				"longitude": 16.1927
			}
			latlong["rootj"] = {
				"latitude": 38.9566,
				"longitude": -77.3623
			};
			latlong["rootk"] = {
				"latitude": 52.3735,
				"longitude": 4.8951
			};
			latlong["rootl"] = {
				"latitude": 33.7866,
				"longitude": -118.2987
			};
			latlong["rootm"] = {
				"latitude": 35.3695,
				"longitude": 139.435
			};
			
			

			var mapData = [{
				"code": "roota",
				"name": "United Arab Emirates",
				"value": 5,
				"color": "#F08080"
			},{
				"code": "rootb",
				"name": "Afghanistan",
				"value": 5,
				"color": "#E9967A"
			},{
				"code": "rootc",
				"name": "United Arab Emirates",
				"value": 5,
				"color": "#FA8072"
			},{
				"code": "rootd",
				"name": "United Arab Emirates",
				"value": 5,
				"color": "#7FFF00"
			},{
				"code": "roote",
				"name": "United Arab Emirates",
				"value": 5,
				"color": "#8B008B"
			},{
				"code": "rootf",
				"name": "United Arab Emirates",
				"value": 5,
				"color": "#6495ED"
			},{
				"code": "rootg",
				"name": "United Arab Emirates",
				"value": 5,
				"color": "#FF00FF"
			},{
				"code": "rooth",
				"name": "United Arab Emirates",
				"value": 5,
				"color": "#6495ED"
			},{
				"code": "rooti",
				"name": "United Arab Emirates",
				"value": 5,
				"color": "#90EE90"
			},{
				"code": "rootj",
				"name": "United Arab Emirates",
				"value": 5,
				"color": "#eea638"
			},{
				"code": "rootk",
				"name": "United Arab Emirates",
				"value": 5,
				"color": "#90EE90"
			},{
				"code": "rootl",
				"name": "United Arab Emirates",
				"value": 5,
				"color": "#008080"
			},{
				"code": "rootm",
				"name": "United Arab Emirates",
				"value": 5,
				"color": "#FFC0CB"
			},{
				"code": "rootm",
				"name": "United Arab Emirates",
				"value": 4.5,
				"color": "#FFC0CB"
			}];


			var map;
			var minBulletSize = 3;
			var maxBulletSize = 70;
			var min = Infinity;
			var max = -Infinity;

			AmCharts.theme = AmCharts.themes.black;

			// get min and max values
			for (var i = 0; i < mapData.length; i++) {
				var value = mapData[i].value;
				if (value < min) {
					min = value;
				}
				if (value > max) {
					max = value;
				}
			}

			// build map
			AmCharts.ready(function() {
				map = new AmCharts.AmMap();
				map.projection = "winkel3";

				
				map.areasSettings = {
					unlistedAreasColor: "#FFFFFF",
					unlistedAreasAlpha: 0.1
				};
				map.imagesSettings = {
					balloonText: "<span style='font-size:14px;'><b>[[title]]</b>: [[value]]</span>",
					alpha: 0.6
				}

				var dataProvider = {
					mapVar: AmCharts.maps.worldLow,
					images: []
				}

				// create circle for each country

				// it's better to use circle square to show difference between values, not a radius
				var maxSquare = maxBulletSize * maxBulletSize * 2 * Math.PI;
				var minSquare = minBulletSize * minBulletSize * 2 * Math.PI;

				// create circle for each country
				for (var i = 0; i < mapData.length; i++) {
					var dataItem = mapData[i];
					var value = dataItem.value;
					// calculate size of a bubble
					var square = (value - min) / (max - min) * (maxSquare - minSquare) + minSquare;
					if (square < minSquare) {
						square = minSquare;
					}
					var size = Math.sqrt(square / (Math.PI * 2));
					var id = dataItem.code;

					dataProvider.images.push({
						type: "circle",
						width: size,
						height: size,
						color: dataItem.color,
						longitude: latlong[id].longitude,
						latitude: latlong[id].latitude,
						title: dataItem.name,
						value: value
					});
				}



				



				map.dataProvider = dataProvider;

				map.write("mapdiv");
			});
		</script>
    </head>

    <body style="background-color:#222222;">
        <div id="mapdiv" style="width: 100%; height: 600px;"></div>
    </body>

</html>