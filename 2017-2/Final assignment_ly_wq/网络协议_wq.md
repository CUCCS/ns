# 网络协议

> ## 概念:
> 网络协议为计算机网络中进行数据交换而建立的规则、标准或约定的集合。

> ## 层次结构：
>* 结构中的每一层都规定有明确的服务及接口标准。
>* 把用户的应用程序作为最高层
>* 除了最高层外，中间的每一层都向上一层提供服务，同时又是下一层的用户。
>* 把物理通信线路作为最低层，它使用从最高层传送来的参数，是提供服务的基础。

> ## 常用协议：
> ### TCP/IP协议
>- 是这三大协议中最重要的一个，作为互联网的基础协议，没有它就根本不可能上网，任何和互联网有关的操作都离不开TCP/IP协议。不过TCP/IP协议也是这三大协议中配置起来最麻烦的一个，单机上网还好，而通过局域网访问互联网的话，就要详细设置IP地址，网关，子网掩码，DNS服务器等参数。
>- TCP/IP尽管是目前最流行的网络协议，但TCP/IP协议在局域网中的通信效率并不高，使用它在浏览“网上邻居”中的计算机时，经常会出现不能正常浏览的现象。此时安装NetBEUI协议就会解决这个问题。

> ### NetBEUI
>- 即NetBios Enhanced User Interface ，或NetBios增强用户接口。
>- 是NetBIOS协议的增强版本，曾被许多操作系统采用，例如Windows for Workgroup、Win 9x系列、Windows NT等。
>- NETBEUI协议在许多情形下很有用，是WINDOWS98之前的操作系统的缺省协议。
>- NetBEUI协议是一种短小精悍、通信效率高的广播型协议，安装后不需要进行设置，特别适合于在“网络邻居”传送数据。所以建议除了TCP/IP协议之外，小型局域网的计算机也可以安上NetBEUI协议。
>- 如果一台只装了TCP/IP协议的WINDOWS98机器要想加入到WINNT域，也必须安装NetBEUI协议。

> ### IPX/SPX协议
>- 本来是Novell开发的专用于NetWare网络中的协议，但是也非常常用——大部分可以联机的游戏都支持IPX/SPX协议。虽然这些游戏通过TCP/IP协议也能联机，但显然还是通过IPX/SPX协议更省事，因为根本不需要任何设置。
>- 除此之外，IPX/SPX协议在非局域网络中的用途似乎并不是很大.如果确定不在局域网中联机玩游戏，那么这个协议可有可无。

---
# 经典网络协议

## OSI七层协议

> ### 概念：
>- 即开放式系统互联。 
>- 一般都叫OSI参考模型。
>- 是ISO（国际标准化组织）组织在1985年研究的网络互联模型。
>- 该体系结构标准定义了网络互连的七层框架（物理层、数据链路层、网络层、传输层、会话层、表示层和应用层），即ISO开放系统互连参考模型。在这一框架下进一步详细规定了每一层的功能，以实现开放系统环境中的互连性、互操作性和应用的可移植性。

> ### 参考模型：![image](https://gss0.bdstatic.com/94o3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike92%2C5%2C5%2C92%2C30/sign=a873f341bf3eb13550cabfe9c777c3b6/b21c8701a18b87d60f0674b6040828381e30fdd7.jpg)
>* 物理层(Physical Layer)
>>- 主要是处理机械的、电气的和过程的接口，以及物理层下的物理传输介质等。
>* 数据链路层(Data Link Layer)
>>- 加强物理层的功能，使其对网络层显示为一条无错的线路。
>* 网络层(Network Layer)
>>- 确定分组从源端到目的端的路由选择。
>* 传输层(Transport Layer)
>>- 从会话层接收数据，并传输给网络层，同时确保到达目的端的各段信息正确无误，而且使会话层不受硬件变化的影响。
>>- 会话层每请求建立一个传输连接，传输层就会为其创建一个独立的网络连接。但如果传输连接需要一个较高的吞吐量，传输层也可以为其创建多个网络连接，让数据在这些网络连接上分流，以提高吞吐量。
>>- 另一方面，如果创建或维持一个独立的网络连接不合算，传输层也可将几个传输连接复用到同一个网络连接上，以降低费用。
>>- 除了多路复用，传输层还需要解决跨网络连接的建立和拆除，并具有流量控制机制。
>* 会话层(Session Layer)
>>- 允许不同机器上的用户之间建立会话关系，既可以进行类似传输层的普通数据传输，也可以被用于远程登录到分时系统或在两台机器间传递文件。
>* 表示层(Presentation Layer)
>>- 用于完成一些特定的功能，这些功能由于经常被请求，因此人们希望有通用的解决办法，而不是由每个用户各自实现。
>* 应用层(Application Layer)
>>- 包含了大量人们普遍需要的协议。不同的文件系统有不同的文件命名原则和不同的文本行表示方法等，不同的系统之间传输文件还有各种不兼容问题，这些都将由应用层来处理。
>>- 应用层还有虚拟终端、电子邮件和新闻组等各种通用和专用的功能。

> ### 分层优点：
>* 人们可以很容易的讨论和学习协议的规范细节。
>* 层间的标准接口方便了工程模块化。
>* 创建了一个更好的互连环境。
>* 降低了复杂度，使程序更容易修改，产品开发的速度更快。
>* 每层利用紧邻的下层服务，更容易记住各层的功能。

> ### 主要组成：
>* 语义:是对协议元素的含义进行解释，不同类型的协议元素所规定的语义是不同的。例如需要发出何种控制信息、完成何种动作及得到的响应等。
>* 语法:将若干个协议元素和数据组合在一起用来表达一个完整的内容所应遵循的格式，也就是对信息的数据结构做一种规定。例如用户数据与控制信息的结构与格式等。
>* 时序:对事件实现顺序的详细说明。例如在双方进行通信时，发送点发出一个数据报文，如果目标点正确收到，则回答源点接收正确；若接收到错误的信息，则要求源点重发一次。

> ### 好处：
>* 使人们容易探讨和理解协议的许多细节。
>* 在各层间标准化接口，允许不同的产品只提供各层功能的一部分，（如路由器在一到三层），或者只提供协议功能的一部分。
>* 创建更好集成的环境。
>* 减少复杂性，允许更容易编程改变或快速评估。
>* 用各层的headers和trailers排错。
>* 较低的层为较高的层提供服务。
>* 把复杂的网络划分成为更容易管理的层

> ### 影响：
>* OSI是一个定义良好的协议规范集，并有许多可选部分完成类似的任务。
>* 它定义了开放系统的层次结构、层次之间的相互关系以及各层所包括的可能的任务。是作为一个框架来协调和组织各层所提供的服务。
>* OSI参考模型并没有提供一个可以实现的方法，而是描述了一些概念，用来协调进程间通信标准的制定。即OSI参考模型并不是一个标准，而是一个在制定标准时所使用的概念性框架。

---

## TCP/IP协议

> ### 产生背景：
> 在阿帕网（ARPA）产生运作之初，通过接口信号处理机实现互联的电脑并不多，大部分电脑相互之间不兼容。当时提出一个理念：“所有电脑生来都是平等的。”为了让这些“生来平等”的电脑能够实现“资源共享”就得在这些系统的标准之上，建立一种大家共同都必须遵守的标准，这样才能让不同的电脑按照一定的规则进行“谈判”，并且在谈判之后能“握手”。

> ### 概念：
> 传输控制协议/因特网互联协议，又名网络通讯协议，是Internet最基本的协议、Internet国际互联网络的基础，由网络层的IP协议和传输层的TCP协议组成。

> ### 参考模型：![image](https://gss3.bdstatic.com/7Po3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=be949a6981025aafc73f76999a84c001/14ce36d3d539b6005574d31eea50352ac75cb7e5.jpg)
>* 网络访问层(Network Access Layer)
>* 互联网层(Internet Layer)
>>- 是整个体系结构的关键部分。其功能是使主机可以把分组发往任何网络，并使分组独立地传向目标。
>>- TCP/IP参考模型的互联网层和OSI参考模型的网络层在功能上非常相似。
>* 传输层(Tramsport Layer)
>>- 使源端和目的端机器上的对等实体可以进行会话。
>>- 在这一层定义了两个端到端的协议：传输控制协议(TCP，Transmission Control Protocol)和用户数据报协议(UDP，User Datagram Protocol)。
>>- TCP是面向连接的协议，它提供可靠的报文传输和对上层应用的连接服务。为此，除了基本的数据传输外，它还有可靠性保证、流量控制、多路复用、优先权和安全性控制等功能。UDP是面向无连接的不可靠传输的协议。
>* 应用层(Application Layer)
>>- 包含所有的高层协议，包括：
>>>* 虚拟终端协议(TELNET，TELecommunications NETwork)
>>>* 文件传输协议(FTP，File Transfer Protocol)
>>>* 电子邮件传输协议(SMTP，Simple Mail Transfer Protocol)
>>>* 域名服务(DNS，Domain Name Service)
>>>* 网上新闻传输协议(NNTP，Net News Transfer Protocol)
>>>* 超文本传送协议(HTTP，HyperText Transfer Protocol)

> ### 特点：
>* TCP/IP协议不依赖于任何特定的计算机硬件或操作系统，提供开放的协议标准，即使不考虑Internet，TCP/IP协议也获得了广泛的支持。所以TCP/IP协议成为一种联合各种硬件和软件的实用系统。
>* TCP/IP协议并不依赖于特定的网络传输硬件，所以TCP/IP协议能够集成各种各样的网络。用户能够使用以太网（Ethernet）、令牌环网（Token Ring Network）、拨号线路（Dial-up line）、X.25网以及所有的网络传输硬件。
>* 统一的网络地址分配方案，使得整个TCP/IP设备在网中都具有惟一的地址
>* 标准化的高层协议，可以提供多种可靠的用户服务。

> ### 缺点：
>* 在服务、接口与协议的区别上不是很清楚，无法将功能与实现方法区分开来。
>* 物理层与数据链路层的划分是必要和合理的，一个好的参考模型应该将它们区分开，而TCP/IP参考模型却没有做到这点。
>* TCP/IP参考模型不适合于其他非TCP/IP协议簇。
