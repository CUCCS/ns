# 校园网动态域名解析技术的应用

## 应用背景

由于中国教育和科研计算机网(CERNET,以下简称教育网)与公网(中国电信网ChinaNET和中国网通网CNC等)之间的路由策略不同,教育网网资费过高,众多高校在接入教育网的同时,也接入了电信网和网通网等公网,以提高访问公网的度、降低网络运营费用。但是当公网用户访问校园网时,因校园网服务器地址是教育网地址,全部流量必须经由教育网链路,由于教育网与公网之间的带宽瓶颈,以及路由策略的不同,公网访问校园网的速度依然很慢。通过使用动态域名解析技术,不仅充分利用了公网出口链路的带宽,而且使公网访问校园网的速度得到很大提升。

## 动态域名技术概述

动态域名又称DDNS.接下来介绍的动态域名是基于策略的更加智能化的动态DNS技术,这种基于策略的动态域名服务器可以根据客户端所在网络的不同,解析和返回访问目标不同的IP地址,从而在访问者与资源对象之间构建最佳的路由。

## 多出口线路共享的校园网资源布局分析

所谓多网络出口指校园网CERNET(中国教育和科研计算机网)、China NET(中国电信)和CNC(中国网通)3条网络出口采用多出口线路共享结构进行互联。

![](https://github.com/LuYe2/ns/blob/Final-assignment/2017-2/Final%20assignment_ly_wq/%E5%A4%9A%E5%87%BA%E5%8F%A3%E7%BA%BF%E8%B7%AF%E5%85%B1%E4%BA%AB%E7%BB%93%E6%9E%84.png?raw=true)

如图所示，多出口线路共享结构是指3条网络出口通过防火墙集中连接在网关设备路由器上,该路由器不仅要承担NAT任务,而且还要负责策略路由(当然,为减轻设备的负载,NAT和策略路由也可以用防火墙来承担).在这种结构中,NAT技术是动态地将不同ISP的IP地址映射到被访问的站点上,从而使被访问的站点具有3个来自不同ISP的IP地址;动态域名技术则是为来源于不同网络的用户访问解析相对应的IP,即一个域名的站点对应多个IP地址,从而使同一域名被请求时能解析成不同的IP地址;而策略路由将根据域名服务器解析的站点IP地址,选择相应的出口,在站点与访问者之间建立正确的路由,从而确保访问者到被访问资源站点的路由始终为最短.

虽然多出口线路共享需要在出口处配置专用的NAT和策略路由设备,但是,该结构所具有的优势是显而易见的,即:对服务器性能要求低,功能单一、负担轻,网络配置灵活、简便,线路可以满足多种用途等.可以预见,该结构将成为当前校园网多出口线路资源对外提供服务的主流模式.

## 动态域名在多出口校园网资源访问布局中的实现

在具有教育网、网通网和电信网3出口的校园网环境中,首先需要在路由器上做好静态地址映射,然后利用动态域名实现对应网络IP地址的解析,并在bind域名服务器上正确配置named.conf和相应的正向解析文件.

### 静态地址映射

www服务器IP地址为211.70.248.3(教育网地址),在路由器上做静态映射:221.6.211.3(网通网地址)映射为211.70.248.3;222.187.125.3(电信网地址)映射为211.70.248.3.通过静态映射,对于公网用户,WWW服务器具有3个IP地址,即211.70.248.3、221.6.211.3和222.187.125.3,对于校园网用户,WWW仍然只具有单一的教育科研网地址。

### IP地址的解析

将CERNET的地址段加入地址表,当域名服务器获得来自CERNET对校内站点www.cuc.edu.cn的访问请求时,就会将访问目标的域名(www.cuc.edu.cn)解析成CERNET(211.70.248.3)的IP地址,将CNC的地址段加入地址表,一旦域名服务器获得来自CNC对校内站点www.cuc.edu.cn的访问请求时,就会将访问目标的域名(www.cuc.edu.cn)解析成CNC(221.6.211.3)的IP地址.对于其他地址的来访请求,其访问对象的域名被解析成ChinaNET(222.187.125.3)的IP地址;当访问目标的IP地址被正确解析后,策略路由根据IP对应的网络出口与访问者建立路由连接,从而可以满足来自不同的网络用户对www.xz-cat.edu.cn的访问请求,达到通过智能选择不同网络出口的目的.

