
 ****一、实验要求

******1.节点：靶机、网关、攻击者主机

******2.连通性

- 靶机可以直接访问攻击者主机

- 攻击者主机无法直接访问靶机

- 网关可以直接访问攻击者主机和靶机

- 靶机的所有对外上下行流量必须经过网关

- 所有节点均可以访问互联网

****二、实验过程

1.网关第一块网卡为NAT网络，eth0。第二块网卡为桥接网络，eth2。


网关：
![](https://github.com/yakkwang/ns/blob/master/2017-2/FlippedClassroom/HW1/%E7%BD%91%E5%85%B3%E7%BD%91%E5%8D%A1%E4%BF%A1%E6%81%AF.jpg)
靶机与攻击者主机均为一块网卡，为桥接网络。网关地址设置为上图网关主机的ip。

攻击者主机：
![](https://github.com/yakkwang/ns/blob/master/2017-2/FlippedClassroom/HW1/%E6%94%BB%E5%87%BB%E8%80%85%E4%B8%BB%E6%9C%BA.png)

靶机：
![](https://github.com/yakkwang/ns/blob/master/2017-2/FlippedClassroom/HW1/%E9%9D%B6%E6%9C%BA.png)

网关：192.168.1.17
靶机：192.168.1.18
攻击者：192.168.1.19  NAT为10.0.2.15

2.在靶机上设置防火墙，使攻击者无法访问靶机。
![](https://github.com/yakkwang/ns/blob/master/2017-2/FlippedClassroom/HW1/%E9%9D%B6%E6%9C%BAping%E6%94%BB%E5%87%BB%E8%80%85.jpg)

靶机可以ping通攻击者。设置防火墙后，攻击者可以收到靶机的ping包，但无法发送回应包。
![](https://github.com/yakkwang/ns/blob/master/2017-2/FlippedClassroom/HW1/%E6%94%BB%E5%87%BB%E8%80%85%E6%94%B6%E4%BF%A1.jpg)

3.网关可以访问靶机和攻击者主机

网关ping靶机：
![](https://github.com/yakkwang/ns/blob/master/2017-2/FlippedClassroom/HW1/%E7%BD%91%E5%85%B3ping%E9%9D%B6%E6%9C%BA.jpg)

网关ping攻击者主机：
![](https://github.com/yakkwang/ns/blob/master/2017-2/FlippedClassroom/HW1/%E7%BD%91%E5%85%B3ping%E6%94%BB%E5%87%BB%E8%80%85.png)

4.靶机与攻击者主机均可访问互联网


靶机访问互联网：
![](https://github.com/yakkwang/ns/blob/master/2017-2/FlippedClassroom/HW1/%E9%9D%B6%E6%9C%BA%E8%AE%BF%E9%97%AE%E4%BA%92%E8%81%94%E7%BD%91.png)

攻击者主机访问互联网：
![](https://github.com/yakkwang/ns/blob/master/2017-2/FlippedClassroom/HW1/%E6%94%BB%E5%87%BB%E8%80%85%E8%AE%BF%E9%97%AE%E4%BA%92%E8%81%94%E7%BD%91.png)

靶机流量经过网关：
![](https://github.com/yakkwang/ns/blob/master/2017-2/FlippedClassroom/HW1/%E7%9B%91%E5%90%AC.png)


