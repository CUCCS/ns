

Android L 默认采用 ART 运行环境，完全兼容 64 位移动处理器。Google 称这将比此前的 Dalvik 模式性能提高两倍，但是会占用更多的内存空间。Android 有三种运行模式：JNI、Dalvik、ART。Dalvik 明显是最慢的，完全的 JNI 模式是最快的但是开发难度高，ART 介于两者之间，并且不影响现有开发模式，所以 Google 选了 ART。我们的技术工程师对此做了技术解读：1）JNI：在开发过程中使用编译器在 C/C++ 等语言直接编译成机器码，运行的时候能够充分利用系统性能，这是最快的。iOS 的 Object C 和 Android 的 NDK 都是这种模式。2）Dalvik：Android L 系统之前所有 Android 版本的运行方式，采用的是字节码，在运行的时候解释执行变成机器能够识别的机器码。这个过程是比较缓慢的。3）ART：Android 4.4 开始推出的新的运行环境，在 APP 安装的时候使用 dex2oat 工具直接把 DEX 文件转换为机器码文件，运行的时候以机器码方式运行，可以充分利用系统性能；此外，改进的内存回收机制使得 ART 运行模式下的内存回收速度只有 Dalvik 运行时模式下的 50%，也能够提升系统运行速度。虽然运行的速度提高了，但是 ART 也有缺点：1）APP 安装过程会变慢；2）APP 占用的存储空间会变多，系统更容易出现系统空间不足问题。Google 今年将 Android 生态的安全提到了很重要的位置上，但 Android L 系统依旧存在着一些先天不足：